<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Algoo - Calendar</title>
</head>

<body style="height: 100vh; margin:0; padding: 5px; box-sizing: border-box;">
  <div id="open-calendar"></div>
  <script type="module">
    import { getBasicAuthHeaders } from "tsdav";
    import { createCalendar } from "./src";

    const onEventCreated = ({ event, ical }) => {
      console.log(ical)
    }
    const onEventUpdated = ({ event, ical }) => {
      console.log(ical)
    }
    const onEventDeleted = ({ event, ical }) => {
      console.log(ical)
    }

    // TODO - CJ - 2025--03-07 - Add a proper login form and ask for the server path
    const username = window.prompt("username")
    const password = window.prompt("password")
    createCalendar(
      [{ serverUrl: 'http://localhost:5232', headers: getBasicAuthHeaders({ username, password }) }],
      document.getElementById('open-calendar'),
      {
        onEventCreated,
        onEventUpdated,
        onEventDeleted,
        userContact: {
          email: username
        },
      }
    )
  </script>
</body>

</html>